

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Examples &mdash; dfnWorks 2.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example Applications" href="applications.html" />
    <link rel="prev" title="Settting up dfnWorks" href="setup.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index_docs.html" class="icon icon-home"> dfnWorks
          

          
            
            <img src="_static/dfnworks_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.2, LANL, Docs: LA-UR-17-22216, Software: LA-CC-17-027
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Settting up dfnWorks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#user-defined-rects">4_user_defined_rects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-defined-ell-uniform">4_user_defined_ell_uniform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exp-exponentially-distributed-fracture-lengths">exp: Exponentially Distributed fracture lengths</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lognormal">lognormal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tpl-truncated-power-law">TPL: Truncated Power Law</a></li>
<li class="toctree-l2"><a class="reference internal" href="#graph-based-pruning">Graph based pruning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#in-fracture-variability">In Fracture Variability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Example Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">dfnWorks Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="pydfnworks.html">pydfnworks: the dfnWorks python package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dfngen.html">dfnGen</a></li>
<li class="toctree-l1"><a class="reference internal" href="dfnflow.html">dfnFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="dfntrans.html">dfnTrans</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Output files</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index_docs.html">dfnWorks</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index_docs.html">Docs</a> &raquo;</li>
        
      <li>Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>This document contains examples for using dfnWorks. All required input files for these examples are contained in the folder dfnWorks/examples/. The focus of this document is to provide visual confirmation that new users of dfnWorks have the code set up correctly, can carry out the following runs and reproduce the following images. All images are rendered using Paraview, which can be obtained for free at http : //www.paraview.org/. The first two examples are simplest so it is recommended that the user proceed in the order presented here.</p>
<p>All examples are in the examples/ directory. Within each subdirectory are the files required to run the example. The command line input is found in notes.txt. Be sure that you have created ~/test_output_files prior to running the examples.</p>
<div class="section" id="user-defined-rects">
<h2>4_user_defined_rects<a class="headerlink" href="#user-defined-rects" title="Permalink to this headline">¶</a></h2>
<p>Location: examples/4_user_defined_rects/</p>
<p>This test case consists of four user defined rectangular fractures within a a cubic domain with sides of length one meter. The network of four fractures, each colored by material ID. The computational mesh is overlaid on the fractures. This image is created by loading the file full_mesh.inp. located in the job folder into Paraview.</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="_images/4_user_rectangles_mesh.png"><img alt="alternate text" src="_images/4_user_rectangles_mesh.png" style="width: 238.8px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>The meshed network of four rectangular fractures.</em></span></p>
</div>
<p>High pressure (red) Dirichlet boundary conditions are applied on the edge of the single fracture along the boundary x = -0.5, and low pressure (blue) boundary conditions are applied on the edges of the two fractures at the boundary x = 0.5.
This image is created by loading the file parsed_vtk/dfn_explicit-001.vtk into Paraview.</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="_images/4_user_rectangles_pressure.png"><img alt="alternate text" src="_images/4_user_rectangles_pressure.png" style="width: 238.8px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>The network of four fractures, colored by pressure solution.</em></span></p>
</div>
<p>Particles are inserted uniformly along the inlet fracture on the left side of the image.
Particles exit the domain through the two horizontal fractures on the right side of the image.
Due to the stochastic nature of the particle tracking algorithm, your pathlines might not be exactly the same as in this image.
Trajectories are colored by the current velocity magnitude of the particle’s velocity.
Trajectories can be visualized by loading the files part_*.inp, in the folder 4_user_rectangles/traj/trajectories/
We have used the extract surface and tube filters in paraview for visual clarity.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="_images/4_user_rectangles_trace.png"><img alt="alternate text" src="_images/4_user_rectangles_trace.png" style="width: 177.6px; height: 126.08px;" /></a>
<p class="caption"><span class="caption-text"><em>Particle trajectories on the network of four fractures.</em></span></p>
</div>
</div>
<div class="section" id="user-defined-ell-uniform">
<h2>4_user_defined_ell_uniform<a class="headerlink" href="#user-defined-ell-uniform" title="Permalink to this headline">¶</a></h2>
<p>Location: examples/4_user_defined_ell_uniform/</p>
<p>This test case consists of four user defined elliptical fractures within a a cubic domain with sides of length one meter. In this case the ellipses are approximated using 8 vertices. We have set the meshing resolution to be uniform by including the argument slope=0 into the mesh_networks function in run_explicit.py.</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="_images/4_user_ellipses_mesh.png"><img alt="alternate text" src="_images/4_user_ellipses_mesh.png" style="width: 222.0px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>The uniformly meshed network of four circular fractures.</em></span></p>
</div>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="_images/4_user_ellipses_pressure.png"><img alt="alternate text" src="_images/4_user_ellipses_pressure.png" style="width: 222.0px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>The network of four circular fractures, colored by pressure solution. Contours in the pressure are shown as black lines.</em></span></p>
</div>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="_images/4_user_ellipses_trace.png"><img alt="alternate text" src="_images/4_user_ellipses_trace.png" style="width: 222.0px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>Particle trajectories on the network of four circular fractures.</em></span></p>
</div>
</div>
<div class="section" id="exp-exponentially-distributed-fracture-lengths">
<h2>exp: Exponentially Distributed fracture lengths<a class="headerlink" href="#exp-exponentially-distributed-fracture-lengths" title="Permalink to this headline">¶</a></h2>
<p>Location: examples/exp/</p>
<p>This test case consists of a family of fractures whose size is exponentially distributed with a minimum size of 1m and a maximum size of 50m. The domain is cubic with an edge length of 10m. All input parameters for the generator can be found in tests/gen_exponential_dist.dat.  We have changed the flow direction to be aligned with the y-axis by modifying the PFLOTRAN input card dfn_explicit.in</p>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/exp_mesh.png"><img alt="alternate text" src="_images/exp_mesh.png" style="width: 222.0px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>Network with rectangular fractures whose lengths following a exponential distribution.</em></span></p>
</div>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="_images/exp_pressure.png"><img alt="alternate text" src="_images/exp_pressure.png" style="width: 222.0px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>Pressure solution on with rectangular fractures whose lengths following a exponential distribution. Gradient is aligned with the Y-Axis</em></span></p>
</div>
</div>
<div class="section" id="lognormal">
<h2>lognormal<a class="headerlink" href="#lognormal" title="Permalink to this headline">¶</a></h2>
<p>Location: examples/lognormal/</p>
<p>This test case consists of two fracture families whose sizes have a lognormal distribution with a minimum size of 0.5m and a maximum size of 50m. The domain size is cubic with an edge length of 10m. All input parameters for the generator can be found in tests/gen_lognormal_dist.dat. We have changed the flow direction to be aligned with the z-axis by modifying the PFLOTRAN input card dfn_explicit.in</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/lognormal_mesh.png"><img alt="alternate text" src="_images/lognormal_mesh.png" style="width: 559.8px; height: 377.4px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/lognormal_pressure.png"><img alt="alternate text" src="_images/lognormal_pressure.png" style="width: 559.8px; height: 377.4px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="tpl-truncated-power-law">
<h2>TPL: Truncated Power Law<a class="headerlink" href="#tpl-truncated-power-law" title="Permalink to this headline">¶</a></h2>
<p>Location: examples/TPL/</p>
<p>This test case consists of two families whose sizes have a truncated power law distribution with a minimum size of 1m and a maximum size of 5m an exponent 2.6. The domain size is cubic with an edge length of 15m.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/power_mesh.png"><img alt="alternate text" src="_images/power_mesh.png" style="width: 629.4px; height: 288.0px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/power_pressure.png"><img alt="alternate text" src="_images/power_pressure.png" style="width: 629.4px; height: 288.0px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/power_trace.png"><img alt="alternate text" src="_images/power_trace.png" style="width: 629.4px; height: 288.0px;" /></a>
</div>
</div>
<div class="section" id="graph-based-pruning">
<h2>Graph based pruning<a class="headerlink" href="#graph-based-pruning" title="Permalink to this headline">¶</a></h2>
<p>Location: examples/pruning/</p>
<p>This example uses a graph representation of a DFN to isolate the 2-core. The pruned DFN has all dead end fractures of the network are removed. This example has two run_explicit.py scripts. The first creates the original DFN and identifies the 2-core using networkx (<a class="reference external" href="https://networkx.github.io/">https://networkx.github.io/</a>). The second meshes the DFN corresponding to the 2-core of the graph and then runs flow and transport. The 2 core network is in a sub-directory 2-core. The original network has 207 fractures and the 2-core has 79 fractures.</p>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="_images/dfn_2_core.png"><img alt="alternate text" src="_images/dfn_2_core.png" style="width: 1119.8999999999999px; height: 433.5px;" /></a>
<p class="caption"><span class="caption-text"><em>(left) Graph based on DFN topology. Each vertex is a fracture in the network. The inflow boundary is colored blue and the outflow is colored red. (right) 2-Core of the graph to the left.</em></span></p>
</div>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="_images/pruned_network.png"><img alt="alternate text" src="_images/pruned_network.png" style="width: 777.35px; height: 328.8px;" /></a>
<p class="caption"><span class="caption-text"><em>(left) Original DFN (right) DFN corresponding to the 2-core of the DFN to the left.</em></span></p>
</div>
</div>
<div class="section" id="in-fracture-variability">
<h2>In Fracture Variability<a class="headerlink" href="#in-fracture-variability" title="Permalink to this headline">¶</a></h2>
<p>Location: examples/in_fracture_var/</p>
<p>This example runs the four rectangular fracture case with variable fracture aperture in each plane. The aperture field is modeled as a correlated multi-variant Gaussian random field. The aperture values are in the aper_node.dat file and the permeabilities are in perm_node.dat. The command line argument indicating that there is spatially variable aperture field is -cell.  In fracture variability is not supported for FEHM runs at this time.</p>
<div class="figure align-center" id="id11">
<a class="reference internal image-reference" href="_images/in_fracture_var_perm.png"><img alt="alternate text" src="_images/in_fracture_var_perm.png" style="width: 201.20000000000002px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>The meshed network of four rectangular fractures colored by permeability, which is spatially variable on each fracture.</em></span></p>
</div>
<div class="figure align-center" id="id12">
<a class="reference internal image-reference" href="_images/in_fracture_var_pressure.png"><img alt="alternate text" src="_images/in_fracture_var_pressure.png" style="width: 201.20000000000002px; height: 157.60000000000002px;" /></a>
<p class="caption"><span class="caption-text"><em>The network of four fractures, colored by pressure solution. Black lines are contours in the pressure field.</em></span></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="applications.html" class="btn btn-neutral float-right" title="Example Applications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setup.html" class="btn btn-neutral float-left" title="Settting up dfnWorks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, LANL, LA-UR-17-22216

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>